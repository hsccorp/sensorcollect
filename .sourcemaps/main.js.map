{"version":3,"sources":["../../src/providers/database/database.ts","../../node_modules/@angular/core/@angular lazy","../../src lazy","../../src/pages/home/home.ts","../../src/providers/sensors/sensors.ts","../../src/pages/view-trips/view-trips.ts","../../src/pages/alert-modal/alert-modal.ts","../../src/pages/ble/ble.ts","../../src/app/main.ts","../../src/app/app.module.ts","../../src/app/app.component.ts","../../node_modules/moment/locale ^/.//.*$","../../src/providers/common-utils/common-utils.ts","../../src/components/progress-bar/progress-bar.ts","../../src/pipes/reverse/reverse.ts"],"names":[],"mappings":"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A;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wB;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACtP2C;AACyC;AAC/C;AACJ;AAGsB;AACd;AACJ;AACN;AAG/B,IAAM,UAAU,GAAU,oEAAoE,CAAC;AAE/F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","file":"main.js","sourcesContent":["import { Injectable } from '@angular/core';\nimport { ToastController, LoadingController, AlertController } from 'ionic-angular';\nimport { CommonUtilsProvider } from '../common-utils/common-utils';\nimport { AngularFireDatabase, FirebaseListObservable } from 'angularfire2/database';\nimport { AngularFireAuth } from 'angularfire2/auth';\nimport * as firebase from 'firebase/app';\nimport { FirebaseApp } from 'angularfire2';\nimport 'firebase/storage';\nimport { Storage } from '@ionic/storage';\nimport { File } from '@ionic-native/file';\nimport 'rxjs/add/operator/map';\nimport { Http } from '@angular/http';\nimport { NgZone } from '@angular/core';\n\n\n\n// Commom DB class that abstracts cloud DB and local SQLite DB\n\n@Injectable()\nexport class DatabaseProvider {\n\n  logFile: string = 'triplog.txt';\n  user: { email: string, password: string } = { email: '', password: '' };\n  constructor(public toastCtrl: ToastController, public loadingCtrl: LoadingController, public file: File, public storage: Storage, public alert: AlertController, public utils: CommonUtilsProvider, public zone: NgZone, public http: Http, public afDb: AngularFireDatabase, public afAuth: AngularFireAuth, public fb:FirebaseApp) {\n    storage.ready().then(() => {\n      console.log(\"Storage engine is:\" + storage.driver)\n    })\n  }\n\n  // create an empty log file on start if needed\n  init() {\n    this.file.checkFile(this.file.dataDirectory, this.logFile)\n      .then(succ => { console.log(\"log file exists\"); })\n      .catch(_ => { console.log(\"**CREATING LOG\"); this.file.createFile(this.file.dataDirectory, this.logFile, true) });\n\n    this.getPendingUpload()\n      .then(succ => {\n        if (succ == undefined) {\n          console.log(\"CLEARING PENDING\");\n          this.setPendingUpload(false);\n        }\n\n      })\n\n  }\n\n  /****  LOCAL DB RELATED ******/\n\n  // write a text string to the logs - used for headers at the start and end \n  // of a trip\n  writeString(str) {\n    console.log(this.file.dataDirectory + \" \" + this.logFile + \" \" + str);\n    return this.file.writeFile(this.file.dataDirectory, this.logFile, str, { replace: false, append: true });\n  }\n\n  // dump a fragment of logs to a file \n  writeLog(logs_object, removeLastComma=false) {\n    // don't JSON stringify full array as these are chunks\n    let str = \"\";\n    for (let i = 0; i < logs_object.length-1; i++) {\n      str = str + \"              \" + JSON.stringify(logs_object[i]) + \",\" + \"\\n\";\n    }\n    str = str + \"              \" + JSON.stringify([logs_object[logs_object.length-1]]);\n    if (!removeLastComma) str = str + \",\";\n    str = str + \"\\n\";\n\n\n    return this.file.writeFile(this.file.dataDirectory, this.logFile, str, { replace: false, append: true });\n\n  }\n\n\n  logFileLocation() {\n    return this.file.dataDirectory + this.logFile;\n  }\n\n  deleteLog() {\n    return this.file.writeFile(this.file.dataDirectory, \"triplog.txt\", \"\", { replace: true });\n  }\n\n\n  // called if credentials are wrong, so user is prompted again\n  clearUser() {\n    console.log(\"clearing user\");\n    this.user.email = \"\";\n    this.user.password = \"\";\n    this.storage.remove('user')\n      .catch(e => { console.log(\"user clear error:\" + JSON.stringify(e)) });\n  }\n\n  getUser(): Promise<any> {\n    return this.storage.get('user');\n  }\n\n  setPendingUpload(status, name = \"\"): Promise<any> {\n    console.log(\"Pending called with \" + status + \" \" + name);\n    return this.storage.set('pendingUpload', { status: status, name: name })\n  }\n\n  getPendingUpload(): Promise<any> {\n    return this.storage.get('pendingUpload')\n  }\n\n  getCachedUser() {\n    return this.user;\n  }\n\n\n  /****  FIREBASE DB RELATED ******/\n\n  // if the app user has not provided credentials for firebase DB, this will ask\n  // for it. \n  promptForPassword(): Promise<any> {\n    return new Promise((resolve, reject) => {\n      let alert = this.alert.create({\n        title: 'Database authorization',\n        message: 'Please enter database password',\n        inputs: [{\n          name: 'email',\n          value: 'mltrainer@hsc.com',\n          type: 'email'\n        },\n        {\n          name: 'password',\n          placeholder: 'Password',\n          type: 'password'\n        }\n        ],\n        buttons: [\n          {\n            text: 'Cancel',\n            role: 'cancel',\n            handler: data => { reject(data) }\n          },\n\n          {\n            text: 'Ok',\n            handler: data => {\n              console.log(\"Saving \" + JSON.stringify(data));\n              this.storage.set('user', data);\n              resolve(data);\n\n            }\n          },\n\n        ],\n      });\n      alert.present();\n    });\n  }\n  doAuthWithPrompt(): Promise<any> {\n    return this.getUser()\n      .then(user => {\n        //console.log(\"Got user:\" + JSON.stringify(user));\n        if (user == undefined || !user.email || !user.password) {\n          return this.promptForPassword()\n            .then(data => {\n              return this.doAuth(data.email, data.password);\n            })\n        }\n        else {\n          console.log(\"doAuthWithPassword callign doAuth\");\n          return this.doAuth(user.email, user.password)\n        };\n\n      })\n      .catch(e => { return Promise.reject(false); })\n\n  }\n\n  doAuth(u, p): Promise<any> {\n    return new Promise((resolve, reject) => {\n      console.log(`->Inside doAuth with ${u}:${p}`);\n      this.user.email = u;\n      this.user.password = p;\n\n      this.afAuth.auth.signInWithEmailAndPassword(u, p)\n        //firebase.auth().signInWithEmailAndPassword(u, p)\n        .then(succ => {\n          console.log(\"**** Signed in\");\n          resolve(succ);\n        })\n        .catch(error => {\n          console.log(\"Auth Error:\" + JSON.stringify(error));\n          this.utils.presentToast(error[\"code\"], \"error\");\n          this.clearUser();\n          reject(error);\n        })\n\n    })\n\n  }\n\n  // deletes a trip from firebase DB and firebase storage\n  removeTripStorage(store) {\n    console.log(\"Storage: \" + store);\n    // also delete the actual log file associated to the DB\n    let sref = this.fb.storage().ref().child(store);\n    sref.delete()\n      .then(succ => { console.log(\"Storage deleted too\"); })\n      .catch(err => { console.log(\"Error deleting storage:\" + JSON.stringify(err)) })\n  }\n\n\n  // called in view trips - attaches to DB list in firebase and updates\n  // view. TBD - move view code to view trips\n  getTripsInDB() {\n    // any time data changes, this event will be called\n    // so deletions are automatically taken care of\n\n    return this.afDb.list('tripDataIndex/',\n      {\n        query: {\n          orderByChild: 'createdOn',\n          limitToFirst:300\n        }\n      });\n\n\n  }\n\n  getDBIndex() {\n    return this.fb.database().ref('tripDataIndex/');\n  }\n\n\n  // upload trip data to firebase. called by doAuth\n  // after all auth validation is done\n  uploadDataToFirebase(name, prg): Promise<any> {\n\n    return new Promise((resolve, reject) => {\n\n      console.log(\"cloud upload called for \" + name);\n      //this.presentLoader(\"loading...\");\n      let storageRef = this.fb.storage().ref();\n      console.log(\"storage ref is \" + storageRef);\n      return this.file.readAsArrayBuffer(this.file.dataDirectory, this.logFile)\n        .then(succ => {\n          console.log(\"File read\");\n          console.log(succ);\n          let blob = new Blob([succ], { type: \"text/plain\" });\n          console.log(\"Blob  created\");\n          let uploadUrl = storageRef.child(`tripdata/${name}.txt`);\n          let uploadTask = uploadUrl.put(blob);\n          uploadTask.on(firebase.storage.TaskEvent.STATE_CHANGED,\n            (snapshot) => {\n              let progress = Math.round((snapshot.bytesTransferred / snapshot.totalBytes) * 100);\n              if (prg) prg.val = progress;\n            },\n            (error) => {\n              console.log(\"Firebase put error \" + JSON.stringify(error));\n              setTimeout(() => { prg.val = -1; }, 500);\n              this.utils.presentToast(\"upload error\", \"error\")\n              reject(error)\n            },\n            () => { // over\n              prg.val = 100;\n              setTimeout(() => { prg.val = -1; }, 500);\n              // write download URL to realtime DB so we can iter it later\n              // there is no API in storage today to iterate\n              let downloadURL = uploadTask.snapshot.downloadURL;\n              console.log(\"Download url is \" + downloadURL);\n              //let key = 'tripDataIndex/'+name;\n              //console.log (\"key=\"+key);\n            \n              let revDate = 0 - new Date().getTime();\n              this.afDb.list('tripDataIndex/').push({\n              //firebase.database().ref('tripDataIndex/').push()\n                //.set({\n                  'url': downloadURL,\n                  'uploadedon': Date(),\n                  'uploadedby': this.user.email,\n                  'name': name,\n                  'version': this.utils.getVersion(),\n                  'storageRef': `tripdata/${name}.txt`,\n                  'createdOn':revDate\n                })\n                .then(succ => { this.utils.presentToast(\"upload complete\"); resolve(succ) })\n                .catch(err => { console.log(\"ERROR \" + err); this.utils.presentToast(\"error creating index\", \"error\"); reject(err) })\n\n            }\n          )\n        })\n        .catch(err => { console.log(\"Cordova Read Error \" + err); reject(err) })\n    }) // new promise\n  }\n\n\n\n}\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/database/database.ts","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncatched exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 165;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@angular/core/@angular lazy\n// module id = 165\n// module chunks = 0","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncatched exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 208;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src lazy\n// module id = 208\n// module chunks = 0","import { Component, ViewChild } from '@angular/core';\nimport { NavController, ModalController, Platform } from 'ionic-angular';\n\nimport { SocialSharing } from '@ionic-native/social-sharing';\nimport { Chart } from 'chart.js';\n\nimport { Insomnia } from '@ionic-native/insomnia';\nimport { CommonUtilsProvider } from '../../providers/common-utils/common-utils';\nimport { SensorsProvider } from '../../providers/sensors/sensors';\nimport { DatabaseProvider } from '../../providers/database/database';\nimport { AlertController } from 'ionic-angular';\nimport { ViewTripsPage } from \"../view-trips/view-trips\";\nimport { AlertModalPage } from \"../alert-modal/alert-modal\";\nimport { BlePage } from \"../ble/ble\";\nimport { SpeechRecognition, SpeechRecognitionListeningOptionsAndroid, SpeechRecognitionListeningOptionsIOS } from '@ionic-native/speech-recognition';\nimport { NgZone } from '@angular/core';\nimport { AndroidPermissions } from '@ionic-native/android-permissions';\n\nimport * as Fuse from 'fuse.js';\n\n\n@Component({\n  selector: 'page-home',\n  templateUrl: 'home.html'\n})\n\n\n\nexport class HomePage {\n \n  // modify these to make your own markers\n  // name = what is displayed as a button\n  // val = what is written in the log\n  markers = [\n    //  good markers\n    { name: 'turn', val: 'turn', color: 'light', speech: 'turn' },\n    { name: 'brake', val: 'brake', color: 'light', speech: 'brake' },\n    { name: 'unknown', val: 'unknown', color: 'light', speech: 'unknown' },\n    // bad markers\n    { name: 'brake', val: 'hard-brake', color: 'alert', speech: 'hard brake' },\n    { name: 'distract', val: 'distract', color: 'alert', speech: 'distract' },\n    { name: 'speedup', val: 'speedup', color: 'alert', speech: 'speed up' },\n    { name: 'turn', val: 'sharp-turn', color: 'alert', speech: 'sharp turn' },\n  ]\n\n\n\n  // will be used for fuzzy search after speech recognition\n  myFuseOptions: Fuse.FuseOptions = {\n    caseSensitive: false,\n    keys: ['speech'],\n    shouldSort: true,\n  };\n  myFuse = new Fuse(this.markers, this.myFuseOptions);\n\n  // handles to DOM for graphs\n  @ViewChild('accGraph') accCanvas;\n  @ViewChild('gyroGraph') gyroCanvas;\n\n  // models for DOM charts\n  charts: {\n    accChart: any,\n    gyroChart: any,\n  } = { accChart: null, gyroChart: null };\n\n\n  progress: { val: number } = { val: -1 }; // upload indication\n\n  // used for relative measurements\n  //isRelative: false;\n  oldSensorVals: { \n    acc: {x:number, y:number, z:number},\n    gyr: {x:number, y:number, z:number},\n\n};\n\n\n  acc: any;  // latest accelerometer data\n  gyro: any; // latest gyro data\n  logState: string = 'Start'; // button state\n  pause: boolean = false; // true if recording paused\n  pauseColor: string = 'secondary';\n  stateColor: string = 'primary'; // button color\n  logs: any[] = []; // will hold history of acc + gyr data\n  logRows: number = 0;\n  viewMode: string = 'graph'; // controls segment display\n  dirty: boolean = true; // hack for graph DOM attachment\n  mLastAcc: number = 0; // not used, really\n  mCurrAcc: number = 0; // not used, really\n  mAcc: number = 0; // not used, really\n  move: string = \"no \"; // heuristic to calc. if we picked up phone\n  oldZ: number = -1000; // stores past Z axis val in acc (for distract analytics)\n  moveCount: number = 0; // times you 'saw' the phone in a trip\n  moveThreshold: number = 3; // tweak this for above sensitivity\n  speed: number = 0; // holds GPS speed if applicable\n  timer = { 'time': \"\" }; //trip timer\n  currentTripName: string = \"\";\n  pendingUpload: boolean = false; // if true, cloud upload failed\n  remoteVer: string = \"0.0.0\"; // latest remote app version;\n  isOutdated: boolean; // true if new version av.\n  logCoords: boolean = true; // if true, will capture latLong\n  speechAvailable: boolean = true; // if false, speech recog will be disabled\n  latestSpeech: string = \"\"; // will hold latest words\n\n  androidOptions: SpeechRecognitionListeningOptionsAndroid;\n  iosOptions: SpeechRecognitionListeningOptionsIOS;\n\n  // init\n  constructor(public navCtrl: NavController,  public plt: Platform,  public socialSharing: SocialSharing, public insomnia: Insomnia,   public utils: CommonUtilsProvider, public alert: AlertController, public modal: ModalController, public speech: SpeechRecognition, public db: DatabaseProvider, public zone: NgZone, public perm: AndroidPermissions, public sensors:SensorsProvider) {\n    //, \n\n    this.plt.ready().then(() => {\n      if (this.plt.is('ios')) {\n        console.log (\">>>>>>>>>>>>>> HACKING BACKGROUND COLOR\");\n         window['plugins'].webviewcolor.change('#000');\n      }\n     \n      this.db.init();\n      this.db.getPendingUpload() // do we have a trip that did not upload?\n        .then(succ => { this.pendingUpload = succ.status; this.currentTripName = succ.name; console.log(\"PENDING RETURNED \" + JSON.stringify(succ)); })\n\n\n      this.speech.isRecognitionAvailable()\n        .then((available: boolean) => {\n          console.log(\"Speech recognition:\" + available);\n          if (!available) {\n            this.utils.presentToast(\"Speech recognition not supported\", \"error\");\n            this.speechAvailable = false;\n          }\n          else {\n            this.getPermission()\n              .then(succ => { console.log(\"Got speech permission\"); })\n              .catch(err => {\n                console.log(\"Error getting speech permission\");\n                this.speechAvailable = false;\n                this.utils.presentToast(\"Error getting speech permissions\", \"error\");\n              })\n\n          }\n        })\n    });\n\n  }\n\n\n  // credit: https://learnionic2.com/2017/03/30/speech-to-text-with-ionic-2/\n  // \n  async getPermission(): Promise<void> {\n    try {\n      let permission = await this.speech.requestPermission();\n      console.log(permission);\n      return permission;\n    }\n    catch (e) {\n      console.error(e);\n    }\n  }\n\n  async hasPermission(): Promise<boolean> {\n    try {\n      let permission = await this.speech.hasPermission();\n      console.log(permission);\n      return permission;\n    }\n    catch (e) {\n      console.error(e);\n    }\n  }\n\n  // called when user taps on the mic\n  recognizeSpeech() {\n    this.androidOptions = {\n      prompt: 'Please start speaking'\n    }\n\n    this.iosOptions = {\n      language: 'en-US'\n    }\n\n    if (this.plt.is('android')) {\n      this.speech.requestPermission().then(\n        succ => {\n          this.speech.startListening(this.androidOptions).subscribe(data => { console.log(data); this.latestSpeech = data[0]; this.setSpeechMarker(this.latestSpeech) },\n            error => console.log(error));\n        }\n      )\n\n    }\n    else if (this.plt.is('ios')) {\n      this.speech.requestPermission().then(\n        succ => {\n          this.utils.presentLoader(\"Please speak...\");\n          setTimeout(() => {\n            this.speech.stopListening();\n            this.utils.removeLoader();\n\n          }, 3000)\n          this.speech.startListening(this.iosOptions)\n            .subscribe(data => { console.log(data); this.speech.stopListening(); this.latestSpeech = data[0]; this.setSpeechMarker(this.latestSpeech) },\n            error => console.log(error));\n        }\n      )\n\n    }\n\n  }\n\n  clearLogin() {\n    this.db.clearUser();\n    this.utils.presentToast(\"cleared user\");\n\n  }\n\n  // returns app version\n  getVersion() {\n    return this.utils.getVersion();\n  }\n\n  // loads view trip controller\n  viewTrips() {\n    console.log(\"View Trips\");\n    this.navCtrl.push(ViewTripsPage);\n  }\n\n  // hidden for now from ui\n  ble() {\n    console.log(\"View BLE\");\n    this.navCtrl.push(BlePage);\n  }\n\n\n  // this is called for a pending trip that was not uploaded to the cloud\n  uploadPending(name) {\n    console.log(\"Trying to upload \" + name);\n    this.upload(this.currentTripName)\n      .then(succ => {\n        console.log(\"all good with upload\");\n        this.db.setPendingUpload(false);\n        this.pendingUpload = false;\n      })\n      .catch(err => {\n        console.log(\"home bubble up: pending upload failed\");\n        this.db.setPendingUpload(true, this.currentTripName);\n\n        this.pendingUpload = true;\n\n      })\n\n\n  }\n  // uploads file to firebase\n  upload(name): Promise<any> {\n    console.log(\"upload\");\n    return this.db.doAuthWithPrompt()\n      .then(succ => {\n        return this.db.uploadDataToFirebase(name, this.progress);\n      })\n  }\n\n  // called by start/stop trip\n  toggleButtonState() {\n    this.logState = (this.logState == 'Start') ? 'Stop' : 'Start';\n    this.stateColor = (this.logState == 'Start') ? 'primary' : 'danger';\n  }\n\n  // pauses recording without stopping trips\n  togglePause() {\n    this.pause = !this.pause;\n    this.pauseColor = (this.pauseColor == 'secondary') ? 'primary' : 'secondary';\n  }\n\n\n// callback handlers for subscription data\n accDataReceived(data) {\n   // console.log (\"acc data:\"+JSON.stringify(data));\n\n    /*if (this.isRelative){\n\n      //console.log (\"Relative comp\");\n\n      data.relX =data.x - this.oldSensorVals.acc.x;\n      data.relY =data.y - this.oldSensorVals.acc.y;\n      data.relZ  =data.z  - this.oldSensorVals.acc.z;\n\n      this.oldSensorVals.acc.x = data.x;\n      this.oldSensorVals.acc.y = data.y;\n      this.oldSensorVals.acc.z = data.z;\n    }*/\n\n    this.processCharts(data, this.charts.accChart, 'acc');\n  \n  }\n\n    gyroDataReceived(data) {\n   // console.log (\"gyr data:\"+JSON.stringify(data));\n\n    /*if (this.isRelative){\n            data.relX =data.x - this.oldSensorVals.gyr.x;\n            data.relY =data.y - this.oldSensorVals.gyr.y;\n            data.relZ  =data.z  - this.oldSensorVals.gyr.z;\n      \n            this.oldSensorVals.gyr.x = data.x;\n            this.oldSensorVals.gyr.y = data.y;\n            this.oldSensorVals.gyr.z = data.z;\n          }*/\n    this.processCharts(data, this.charts.gyroChart, 'gyro');\n\n  }\n\n  gpsDataReceived(data) {\n     // console.log (\"GPS\"+JSON.stringify(data));\n         if (data.coords) {\n          // this is meters per sec, convert to mph\n          this.speed = data.coords.speed * 2.23694;\n          if (this.isLogging()) {\n            if (!this.logCoords) { // mask lat/long\n              data.coords.latitude = 0;\n              data.coords.longitude = 0;\n              data.coords.altitude = 0;\n\n            } \n            this.storeLog('gps', data.coords);\n          }\n        }\n  }\n\n  // init code to start a trip\n  startTrip() {\n    this.pause = false;\n    this.pauseColor = 'secondary';\n    this.moveCount = 0;\n    //this.isRelative = false;\n\n    this.oldSensorVals = {\n      acc: {x:0, y:0, z:0},\n      gyr: {x:0, y:0, z:0},\n\n    };\n    \n    let im = this.modal.create(AlertModalPage, {}, { cssClass: \"alertModal\", enableBackdropDismiss: false });\n    im.onDidDismiss(data => {\n      console.log(\"RETURNED: \" + JSON.stringify(data));\n\n      if (data.isCancelled == false) {\n        //this.isRelative = data.isRelative;\n        this.logCoords = data.xy;\n        this.clearArray(); // remove array\n        this.db.deleteLog() // remove log file\n          .then(_ => {\n            // start new log and start trip\n            this.currentTripName = data.name || 'unnamed trip';\n            this.startTripHeader(this.currentTripName);\n            this.toggleButtonState();\n            this.utils.presentToast(\"trip recording started\");\n            this.sensors.startAndStreamSensors(this.accDataReceived.bind(this), this.gyroDataReceived.bind(this), this.gpsDataReceived.bind(this))\n            this.utils.startTimer(this.timer);\n            // make sure screen stays awake\n            this.insomnia.keepAwake()\n              .then((succ) => { console.log(\"Wakelock acqusition OK\") })\n              .catch((err) => { this.utils.presentToast(\"could not grab wakelock, screen will dim\", \"error\"); });\n          })\n          .catch(err => { \n            console.log (JSON.stringify(err));\n            this.utils.presentToast('problem removing log file', 'error'); })\n      }\n\n    })\n    im.present();\n  }\n\n  // aborts a trip without saving \n  abortTrip() {\n    console.log(\"Inside abort trip\");\n\n    this.utils.stopTimer(this.timer);\n    this.toggleButtonState();\n    this.sensors.stopAllSensors();\n    this.insomnia.allowSleepAgain()\n      .then((succ) => { console.log(\"*** WAKE LOCK RELEASED OK **\") })\n      .catch((err) => { console.log(\"Error, releasing wake lock:\" + err) });\n    this.db.setPendingUpload(false, this.currentTripName);\n    this.pendingUpload = false;\n    this.utils.presentToast(\"Trip Aborted\", \"success\");\n\n\n  }\n\n  // stops trip, and associated sensors\n  stopTrip() {\n    console.log(\"Inside stop trip\");\n    this.utils.stopTimer(this.timer);\n    this.sensors.stopAllSensors();\n    // make sure screen stays awake\n    this.insomnia.allowSleepAgain()\n      .then((succ) => { console.log(\"*** WAKE LOCK RELEASED OK **\") })\n      .catch((err) => { console.log(\"Error, releasing wake lock:\" + err) });\n\n    try {\n      this.flushLog(true).then(_ => {\n        let str = \"]}\\n\";\n        console.log(\"STOPPING TRIP, writing \" + str);\n        this.db.writeString(str);\n        this.clearArray();\n        this.toggleButtonState();\n        this.utils.presentToast(\"trip recording stopped\");\n        this.upload(this.currentTripName)\n          .then(succ => {\n            console.log(\"all good with upload\");\n            this.db.setPendingUpload(false);\n            this.pendingUpload = false;\n          })\n          .catch(err => {\n            console.log(\"home bubble up: upload failed in stop trip\");\n            console.log(JSON.stringify(err));\n            this.db.setPendingUpload(true, this.currentTripName);\n            this.pendingUpload = true;\n\n          })\n\n        //this.utils.cloudUpload(this.progress);\n      }, (error) => (console.log(error)));\n    }\n    catch (err) { console.log(\"CATCH=\" + err); }\n\n  }\n\n  // called by start trip. Writes a header \n  // we need this because weare writing logs in chunks\n  // that eventually need to represent valid JSON objects\n  startTripHeader(tname) {\n    let str = \"{\\n    \\\"id\\\":\\\"\" + tname + \"\\\",\\n\";\n    str += \"    \\\"sensors\\\":[\\n\";\n    console.log(\"STARTING TRIP, writing \" + str);\n    this.db.writeString(str)\n      .then(resp => { })\n      .catch(e => { \"ERROR:\" + e });\n\n  }\n\n  // given a sensor object, updates graph and log \n   processCharts = function (object, chart, type): Promise <boolean> {\n    //console.log (\"--- process start ---\");\n    return new Promise ((resolve,reject) => {\n    //console.log (\"Inside process with \"+ JSON.stringify(object))\n    if (!this.dirty) { // let's make sure there is no race when chart is re-creating\n      \n      // I don't think zone.run will work here\n      // we need time for the view to render first?\n      setTimeout(() => {\n        chart.data.datasets[0].data.push(object.x);\n        chart.data.datasets[1].data.push(object.y);\n        chart.data.datasets[2].data.push(object.z);\n        chart.data.labels.push(\"\");\n\n        chart.data.datasets[0].data.shift();\n        chart.data.datasets[1].data.shift();\n        chart.data.datasets[2].data.shift();\n        chart.data.labels.shift();\n        chart.update();\n      \n      }, 100);\n    }\n    else {\n      console.log(\"dirty\");\n    }\n\n    if (type == 'acc') // accelerometer\n    {\n\n      this.acc = JSON.stringify(object);\n      this.mLastAcc = this.mCurrAcc;\n      this.mCurrAcc = Math.sqrt(object.x * object.x + object.y * object.y + object.z * object.z);\n      let delta = this.mCurrAcc - this.mLastAcc;\n      this.mAcc = this.mAcc * 0.9 + delta; // not sure what we will do with this, yet\n\n      // see if phone move matches threshold. Lets make sure we don't double count\n      // active moves\n      if ((Math.abs(object.z - this.oldZ) >= this.moveThreshold) && (this.move == 'no ')) {\n        if (this.oldZ != -1000) {\n          this.move = 'YES';\n          this.moveCount++;\n          // log real value, not abs. As it turns out hard braking is also Z dependant and \n          // possibly the opp. of this. Needs investigation.\n          if (this.isLogging()) { this.storeLog('Analytics', { 'value': object.z - this.oldZ, 'threshold': this.moveThreshold, 'action': 'Move' }) }\n        }\n\n      }\n      else {\n        this.move = 'no ';\n      }\n      this.oldZ = object.z;\n\n      if (this.isLogging()) { this.storeLog('Acc', object); }\n\n    } // if acc\n\n    else if (type == 'gyro') {\n      this.gyro = JSON.stringify(object);\n      if (this.isLogging()) { this.storeLog('Gyro', object); }\n    }\n\n    else // some other data point \n    {\n\n      if (this.isLogging()) { this.storeLog(type, object); }\n    }\n    resolve (true);\n\n    });\n\n  }\n\n\n  // this adds 'events' to the log. Use it for analysis - before you perform an action\n  // you want to train, set an appropriate marker\n  // allow marker even if paused. if paused, start.\n  setMarker(str) {\n    this.storeLog('Marker', str);\n    this.utils.presentToast(str + ' marker set', 'success', 1500);\n    // restart recording if paused\n    if (!this.isLogging()) this.togglePause();\n  }\n\n  // uses speech recognition - may not be accurate words, so lets differentiate\n  setSpeechMarker(str) {\n    str = this.speechSanitize(str);\n    console.log(\"SPEECH MARKER \" + str);\n    this.storeLog('SpeechMarker', str);\n    this.utils.presentToast(str + ' marker set', 'success', 1500);\n    // restart recording if paused\n    if (!this.isLogging()) this.togglePause();\n  }\n\n  // corrects some common speech snafus\n  // will heavily depend on accent\n  speechSanitize(str) {\n    let s = str.toLowerCase();\n    let fuzzy = this.myFuse.search(s);\n\n    if (!fuzzy.length) {\n      console.log(\"Fuzzy search failed, going with manual sanitization\");\n      s = s.replace(\"heartbreak\", \"hard brake\");\n      s = s.replace(/break/g, \"brake\");\n      s = s.replace(/heart/g, \"hard\");\n      s = s.replace(/speed up/g, \"speedup\");\n      s = s.replace(/ /g, \"-\");\n    }\n    else {\n      s = fuzzy[0][\"val\"];\n      console.log(\"Fuzzy returned: \" + s);\n    }\n\n\n    console.log(\"FUZE\");\n    console.log(this.myFuse.search(str));\n    return s;\n\n  }\n\n\n  // shares latest trip\n  share() {\n    let f = this.db.logFileLocation();\n    let options = {\n      subject: 'TripData trip logs',\n      message: 'Trip logs attached',\n      files: [f],\n      chooserTitle: 'Share via...'\n    };\n\n\n    this.socialSharing.shareWithOptions(options).then(() => {\n\n    }).catch(() => {\n      this.utils.presentToast('Error sharing', 'error');\n    });\n  }\n\n  // writes to memory, and periodically flushes\n  storeLog(type, obj) {\n    this.logs.push({ type: type, data: obj, date: Date() })\n    this.logRows = this.logs.length;\n    if (this.logRows > 100) { this.flushLog(); this.clearArray(); }\n  }\n\n\n  flushLog(removeLastComma = false) {\n    console.log(\">>>>>>>Flushing logs...\");\n    return this.db.writeLog(this.logs, removeLastComma);\n  }\n\n\n  isLogging(): boolean {\n    return this.logState == 'Stop' && this.pause == false;\n  }\n\n\n  // before trip is started, lets check if there is a pending trip to upload\n  checkPendingUpload(): Promise<any> {\n    return new Promise((resolve, reject) => {\n\n      console.log(\"PENDING = \" + this.pendingUpload);\n\n      if (this.pendingUpload) {\n        let alert = this.alert.create({\n          title: 'Confirm',\n          message: 'This will delete current unsaved trip',\n          buttons: [\n            {\n              text: 'Cancel',\n              handler: () => {\n                console.log('Cancel clicked');\n                reject(false);\n              }\n            },\n            {\n              text: 'Ok',\n              handler: () => {\n                console.log (\"Resolving true\");\n                resolve(true);\n\n              }\n            }\n          ]\n        });\n        alert.present();\n      }\n      else {\n        resolve(true);\n      }\n    })\n\n  }\n\n  // called by UI\n  toggleTrip() {\n    if (this.logState == 'Stop') {\n      // write to file if stopped\n      this.stopTrip();\n    }\n\n\n    if (this.logState == 'Start') {\n      this.checkPendingUpload()\n        .then(succ => this.startTrip())\n        .catch(err => console.log(\"Not starting a trip \"+ JSON.stringify(err)))\n    }\n  }\n\n  clearArray() {\n    this.logs = [];\n    this.logRows = 0;\n  }\n\n  // not used  - I removed delete - no sense now that logs are not cumulative\n  confirmDelete() {\n    let alert = this.alert.create({\n      title: 'Confirm Deletion',\n      message: 'This will permanently delete all stored trips',\n      buttons: [\n        {\n          text: 'Cancel',\n          handler: () => {\n            console.log('Cancel clicked');\n          }\n        },\n        {\n          text: 'Ok',\n          handler: () => {\n            this.utils.presentToast(\"clearing log file\");\n            this.clearArray();\n            this.db.deleteLog();\n\n          }\n        }\n      ]\n    });\n    alert.present();\n  }\n\n\n  rawClicked() {\n    console.log(\"raw clicked\");\n  }\n  // given that DOM elements are removed on switching segments\n  // we need to redraw/reattach charts\n\n  chartClicked() {\n    //this.utils.presentLoader(\"charting graph..\");\n    /*\n    this.dirty = true;\n    \n    setTimeout(() => {\n      console.log(\"re-drawing chart..\");\n      this.charts.accChart.destroy();\n      this.charts.gyroChart.destroy();\n      this.createChart(this.charts, this.accCanvas.nativeElement, 'acc', 'Accelerometer');\n      this.createChart(this.charts, this.gyroCanvas.nativeElement, 'gyro', 'Gyroscope');\n      ;\n      this.utils.removeLoader();\n    }, 500);*/\n  }\n\n  // instantiates charts. Generic function to handle different chart objects\n  createChart(charthandle, elem, type, title = '', options) {\n    console.log(\"*** Creating Chart\");\n    let chart;\n\n\n     chart = new Chart(elem, {\n\n      type: 'line',\n      data: {\n        labels: new Array(20).fill(\"\"),\n        datasets: [\n          {\n            label: options.xLabel || 'X',\n            data: new Array(20).fill(0),\n            borderColor: '#ad2719',\n            backgroundColor: 'rgba(231, 76, 60,0.4)',\n            borderWidth: 2,\n            fill: true,\n          },\n          {\n            label: options.yLabel || 'Y',\n            data: new Array(20).fill(0),\n            borderColor: '#148744',\n            backgroundColor: 'rgba(39, 174, 96,0.4)',\n            borderWidth: 2,\n            fill: true,\n          },\n\n          {\n            label: options.zLabel || 'Z',\n            data: new Array(20).fill(0),\n            borderColor: 'rgba(142, 68, 173,1.0)',\n            backgroundColor: 'rgba(155, 89, 182,0.3)',\n            borderWidth: 2,\n            fill: true,\n          },\n        ]\n      },\n      options: {\n        title: {\n          display: true,\n          text: title,\n        },\n        responsive: true,\n        \n      animation: {\n        duration: 100,\n        easing: 'linear'\n      },\n      \n        scales: {\n          xAxes: [{\n            gridLines: {\n              color: \"##7f8c8d\",\n            },\n          }],\n\n          yAxes: [{\n            display: true,\n            gridLines: {\n              color: \"##7f8c8d\",\n            },\n            ticks: {\n              min:options.min, \n              max:options.max\n            }\n          }]\n        }\n      }\n\n    });\n\n    if (type == 'acc')\n      charthandle.accChart = chart;\n    else\n      charthandle.gyroChart = chart;\n    this.dirty = false;\n  }\n\n  ionViewDidEnter() {\n    this.plt.ready().then(() => {\n      this.utils.getRemoteVersion()\n        .then(ver => {\n          this.remoteVer = ver;\n          let localver = this.utils.getVersion();\n          console.log(`remote: ${this.remoteVer}, local: ${localver}`);\n          let c = this.utils.versionCompare(localver, this.remoteVer);\n          if (c == -1) this.isOutdated = true;\n\n          this.createChart(this.charts, this.accCanvas.nativeElement, 'acc', 'Acceleration Magnitude', {min:-20, max:20, xLabel:'acceleration', yLabel:'', zLabel:'' });\n          this.createChart(this.charts, this.gyroCanvas.nativeElement, 'gyro', 'Rotation', {min:-360, max:360, zLabel:'alpha', xLabel:'beta', yLabel:'gamma'});\n        })\n    })\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.ts","import { Injectable } from '@angular/core';\nimport { CommonUtilsProvider } from '../common-utils/common-utils';\nimport 'rxjs/add/operator/map';\nimport { DeviceMotion, DeviceMotionAccelerationData } from '@ionic-native/device-motion';\nimport { Gyroscope, GyroscopeOrientation } from '@ionic-native/gyroscope';\nimport { Geolocation, Geoposition } from '@ionic-native/geolocation';\nimport { AndroidPermissions } from '@ionic-native/android-permissions';\nimport { Observable } from 'rxjs/Observable';\nimport {GyroNorm} from 'gyronorm';\nimport {Platform} from 'ionic-angular';\nimport {mat3} from 'gl-matrix';\n//import * as math from 'mathjs';\n\n\n// Service to start/listen/unsubscribe sensors\n\n@Injectable()\nexport class SensorsProvider {\n\n  // will hold subscriptions to sensors\n\n\n  accSub: any;\n  gyrSub: any;\n  gpsSub: any;\n  gn: any;\n\n\n  freq: number = 500; // sampling freq for gps/gyr\n\n  constructor(public deviceMotion: DeviceMotion, public gyroscope: Gyroscope, public perm: AndroidPermissions, public geo: Geolocation, public utils: CommonUtilsProvider, public plt:Platform) {\n    console.log('Hello SensorsProvider Provider');\n\n    this.plt.ready().then ( () => {\n      this.gn = new GyroNorm();\n    });\n\n    //\n  }\n\n  // unsubscribe from varios sensors\n  stopAllSensors() {\n    try {\n      this.gn.stop();\n      //this.accSub.unsubscribe();\n     // this.gyrSub.unsubscribe();\n      //navigator.geolocation.clearWatch(this.sensorHandles.gpsSub); // not sure why this is needed\n      this.gpsSub.unsubscribe();\n    }\n    catch (e) {\n      console.log(\"stop sensor error: \" + e);\n    }\n\n  }\n\n   transpose(a)\n  {\n    return a[0].map(function (_, c) { return a.map(function (r) { return r[c]; }); });\n    // or in more modern dialect\n    // return a[0].map((_, c) => a.map(r => r[c]));\n  }\n\n   // https://w3c.github.io/deviceorientation/spec-source-orientation.html\n   getRotationMatrix2( alpha, beta, gamma ) {\n    \n      let degtorad = Math.PI / 180;\n      var _x = beta  ? beta  * degtorad : 0; // beta value\n      var _y = gamma ? gamma * degtorad : 0; // gamma value\n      var _z = alpha ? alpha * degtorad : 0; // alpha value\n    \n      var cX = Math.cos( _x );\n      var cY = Math.cos( _y );\n      var cZ = Math.cos( _z );\n      var sX = Math.sin( _x );\n      var sY = Math.sin( _y );\n      var sZ = Math.sin( _z );\n    \n      //\n      // ZXY rotation matrix construction.\n      //\n    \n      var m11 = cZ * cY - sZ * sX * sY;\n      var m12 = - cX * sZ;\n      var m13 = cY * sZ * sX + cZ * sY;\n    \n      var m21 = cY * sZ + cZ * sX * sY;\n      var m22 = cZ * cX;\n      var m23 = sZ * sY - cZ * cY * sX;\n    \n      var m31 = - cX * sY;\n      var m32 = sX;\n      var m33 = cX * cY;\n    \n      return [\n        m11,    m12,    m13,\n        m21,    m22,    m23,\n        m31,    m32,    m33\n      ];\n    \n    };\n\n\n// credit:https://stackoverflow.com/a/36662093/1361529\ngetRotationMatrix(alpha, beta, gamma) {\n  \n    let out = [];\n    let  _z = alpha;\n    let _x = beta;\n    let _y = gamma;\n  \n    let cX = Math.cos( _x );\n    let cY = Math.cos( _y );\n    let cZ = Math.cos( _z );\n    let sX = Math.sin( _x );\n    let sY = Math.sin( _y );\n    let sZ = Math.sin( _z );\n  \n    out[0] = cZ * cY + sZ * sX * sY,    // row 1, col 1\n    out[1] = cX * sZ,                   // row 2, col 1\n    out[2] = - cZ * sY + sZ * sX * cY , // row 3, col 1\n  \n    out[3] = - cY * sZ + cZ * sX * sY,  // row 1, col 2\n    out[4] = cZ * cX,                   // row 2, col 2\n    out[5] = sZ * sY + cZ * cY * sX,    // row 3, col 2\n  \n    out[6] = cX * sY,                   // row 1, col 3\n    out[7] = - sX,                      // row 2, col 3\n    out[8] = cX * cY                    // row 3, col 3\n  \n  return out\n  };\n\n  // start listening to sensors when trip starts\n  startAndStreamSensors(accCallback: Function, gyrCallback: Function, gpsCallback: Function) {\n  let gyroNormArgs = {\n    logger: function (data) {console.log (\"Gyr-log:\"+JSON.stringify(data))},\n    gravityNormalized:false, \n    orientationBase:GyroNorm.GAME,\n    frequency:1000,\n    screenAdjusted:false,\n  }\n\n\n  let out= [];\n\n  console.log (\">>> initing gyronorm\")\n  \n  //const GyroNorm = require('GyroNorm').GyroNorm;\n  \n\n  console.log (\"********** GYRONORM INIT\");\n\n\n   this.gn.init(gyroNormArgs)\n   .then (_ => {\n    console.log (\"********** GYRONORM INIT OK, STARTING\");\n      this.gn.start ( (gdata) => {\n       // console.log (\"**GDATA**\"+JSON.stringify(gdata))\n\n       const deg2rad = Math.PI / 180;\n       let alpha = gdata.do.alpha;\n       let beta = gdata.do.beta;\n       let gamma = gdata.do.gamma;\n\n       let rotatematrix = this.getRotationMatrix(alpha * deg2rad, beta * deg2rad, gamma * deg2rad);\n\n       let relativeacc = new Array(3);\n       let earthacc = new Array(3);\n       let inv = new Array(9)\n       relativeacc[0] = gdata.dm.x;\n       relativeacc[1] = gdata.dm.y;\n       relativeacc[2] = gdata.dm.z;\n\n       //console.log (\"FIRST MATRIX\")\n       mat3.invert(inv,rotatematrix);\n       //console.log (\"SECOND MATRIX\")\n       mat3.multiply(earthacc, inv, relativeacc);\n\n\n       let accEarthX = earthacc[0];\n       let accEarthY = earthacc[1];\n       let accEarthZ = earthacc[2];\n        \n        let aMag = Math.sqrt(accEarthX*accEarthX + accEarthY*accEarthY + accEarthZ*accEarthZ)\n\n        console.log (`---RAW DATA --- ` + JSON.stringify(gdata));\n        console.log (`*** EARTH DATA X=${accEarthX}, Y=${accEarthY} Z=${accEarthZ}`)\n\n        let accdata = {x:0, y:0, z:0 , mag:0};\n\n\n        accdata.x = accEarthX\n        accdata.y = accEarthY;\n        accdata.z = accEarthZ;\n        accdata.mag = aMag;\n\n        // overwrite only mag\n       // accdata.x = aMag;\n        //accdata.y = 0;\n        //accdata.z = 0;\n\n        \n        //console.log (\"*** ACC MAG=\"+aMag);\n        accCallback (accdata);\n\n        /*\n\n        https://developer.mozilla.org/en-US/docs/Web/API/Detecting_device_orientation#Motion_values_explained\n\n\n        The DeviceOrientationEvent.alpha value represents the motion of the device around the z axis, represented in degrees with values ranging from 0 to 360.\n        \n        The DeviceOrientationEvent.beta value represents the motion of the device around the x axis, represented in degrees with values ranging from -180 to 180. This represents a front to back motion of the device.\n\n        The DeviceOrientationEvent.gamma value represents the motion of the device around the y axis, represented in degrees with values ranging from -90 to 90. This represents a left to right motion of the device.\n*/\n\n        let gyrdata = {x:0, y:0, z:0};\n        gyrdata.z = gdata.dm.alpha;\n        gyrdata.x = gdata.dm.beta;\n        gyrdata.y = gdata.dm.gamma;\n        gyrCallback (gyrdata);\n\n      })\n   } )\n    .catch ( err => console.log (\"===> Norm err:\" + JSON.stringify(err)));\n\n    /*this.accSub = this.deviceMotion.watchAcceleration({ frequency: this.freq })\n      .subscribe(data => {\n       // accCallback(data);\n\n      })\n    this.gyrSub = this.gyroscope.watch({ frequency: this.freq })\n      .subscribe(data => {\n        let dataClone = JSON.stringify(data);\n       // gyrCallback(data);\n      })\n*/\n    this.perm.checkPermission(this.perm.PERMISSION.ACCESS_FINE_LOCATION)\n      .then(_ => {\n        this.gpsSub = this.geo.watchPosition()\n          .subscribe(data => {\n            gpsCallback (data);\n\n          })\n      })\n      .catch(err => {\n        this.utils.presentToast(\"Error latching to GPS\", \"error\");\n\n      });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/sensors/sensors.ts","import { Component } from '@angular/core';\nimport { NavController, NavParams } from 'ionic-angular';\nimport { CommonUtilsProvider } from\n  '../../providers/common-utils/common-utils';\nimport { DatabaseProvider } from '../../providers/database/database';\nimport {ReversePipe} from \"../../pipes/reverse/reverse\";\n\nimport { NgZone } from '@angular/core';\nimport { SocialSharing } from '@ionic-native/social-sharing';\nimport { ItemSliding } from 'ionic-angular';\nimport { InAppBrowser } from '@ionic-native/in-app-browser';\nimport {FirebaseListObservable } from 'angularfire2/database';\n\n@Component({\n  selector: 'page-view-trips',\n  templateUrl: 'view-trips.html',\n})\nexport class ViewTripsPage {\n  trips: FirebaseListObservable<any[]>;\n  status = { text: \"loading trips...\" };\n\n  constructor(public navCtrl: NavController, public navParams: NavParams, public utils: CommonUtilsProvider, public zone: NgZone, public socialSharing: SocialSharing, public iab: InAppBrowser, public db: DatabaseProvider) {\n  }\n\n  // displays the trip log in a new window\n  displayTrip(trip, slider) {\n    slider.close();\n    this.utils.presentLoader(\"loading trip...\");\n    const browser = this.iab.create(trip.url, \"_blank\", \"enableViewPortScale=yes,closebuttoncaption=Done\");\n    browser.on('loadstop').subscribe(resp => { console.log(\"STOP\"); this.utils.removeLoader() });\n    browser.on('loaderror').subscribe(resp => { console.log(\"ERROR\"); this.utils.removeLoader() });\n  }\n\n  // tbd - this view already logs in, so relogin on \n  // delete likely not necc. need to read up on \n  // session validity\n  delete(trip, si) {\n    si.close();\n\n    // make sure you are logged in as the same user\n    // as the trip you want to delete. ideally, this should\n    // be at the firebase auth layer. Maybe someday.\n    if (trip.uploadedby != this.db.getCachedUser().email && this.db.getCachedUser().email != \"arjun@hsc.com\") {\n      this.utils.presentToast(\"Trip not uploaded by you\", \"error\", 3000);\n      return;\n    }\n    let sref = trip.storageRef;\n    this.trips.remove(trip.$key);\n    this.db.removeTripStorage(sref);\n  }\n\n  // social sharing for the selected trip\n  share(trip, slidingItem: ItemSliding) {\n    let f = trip.url;\n    let options = {\n      subject: trip.name + ' trip logs',\n      message: 'Trip logs attached',\n      files: [f],\n      chooserTitle: 'Share via...'\n    };\n\n    slidingItem.close();\n    this.socialSharing.shareWithOptions(options).then(() => {\n\n    }).catch(() => {\n      this.utils.presentToast('Error sharing', 'error');\n    });\n  }\n\n\n  // iterates firebase and retrieves last 300 trips\n  // should be enough\n\n  // TBD: Handle offline error\n  cloudGetTrips() {\n    \n    this.trips = this.db.getTripsInDB();\n\n\n    this.trips\n      .subscribe(items => {\n        console.log(\"***CHANGED***\");\n        //console.log (JSON.stringify(items));\n        this.utils.removeLoader();\n      })\n      \n  }\n\n\n  // authenticates and then downloads\n  cloudGetTripsWithAuth() {\n    this.db.doAuthWithPrompt()\n      .then(succ => { this.cloudGetTrips() })\n      .catch(err => { this.utils.removeLoader();});\n  }\n\n  ionViewDidEnter() {\n     console.log('ionViewDidEnter ViewTripsPage');\n     this.utils.presentLoader(\"retrieving trips...\", 60000);\n    this.cloudGetTripsWithAuth();\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad ViewTripsPage');\n    \n  }\n\n}\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/view-trips/view-trips.ts","import { Component } from '@angular/core';\nimport { NavController, NavParams, ViewController } from 'ionic-angular';\n\n// Styled modal that can replace an alert controller\n// had to do this because alerts do not support a mix of input types\n\n@Component({\n  selector: 'page-alert-modal',\n  templateUrl: 'alert-modal.html',\n})\nexport class AlertModalPage {\n  inputData = {xy:true, name:\"\", obd:true, isRelative:true, isCancelled:false};\n  constructor(public navCtrl: NavController, public navParams: NavParams, public viewCtrl:ViewController) {\n    console.log (\"*** Modal constructor\");\n  }\n\n  // don't act on modal input\n  inputCancelled() {\n    console.log (\"Cancelled\");\n    this.inputData.isCancelled = true;\n    this.viewCtrl.dismiss(this.inputData);\n  }\n\n  inputSubmitted() {\n    console.log (\"Submitted\");\n    console.log (JSON.stringify(this.inputData));\n    this.inputData.isCancelled = false;\n    this.viewCtrl.dismiss(this.inputData);\n  }\n\n \n  \n  ionViewDidLoad() {\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/alert-modal/alert-modal.ts","import { Component } from '@angular/core';\nimport { NavController, NavParams } from 'ionic-angular';\nimport { BLE } from '@ionic-native/ble';\nimport { NgZone } from '@angular/core';\nimport { CommonUtilsProvider } from '../../providers/common-utils/common-utils';\n\n\n// currently a shell operation - discovery only and basic connect\n// need to buy a BLE adapter for OBD and then code rest\n\n@Component({\n  selector: 'page-ble',\n  templateUrl: 'ble.html',\n})\nexport class BlePage {\n\n  isScanning: boolean = false;\n  devices = [];\n\n  constructor(public navCtrl: NavController, public navParams: NavParams, public ble: BLE,public zone: NgZone, public utils: CommonUtilsProvider) {\n\n    console.log (\">>>> Inside BLE \");   \n\n  }\n\n\n  // Initiates bluetooth discovery\n  startScan() {\n    this.isScanning = true;\n    this.devices = [];\n    this.ble.startScan([]).subscribe(device => {\n      console.log(\"GOT:\" + JSON.stringify(device));\n      if (!this.utils.contains(this.devices, device)) {\n        this.zone.run(() => {\n          this.devices.push(device);\n        });\n\n      }\n\n    });\n    setTimeout(() => { console.log(\"Timer\"); this.stopScan() }, 20000)\n  }\n\n  // cancels BT discovery\n  stopScan() {\n    // handles timeout fake calls\n    if (this.isScanning == false) return;\n    this.isScanning = false;\n    this.ble.stopScan()\n      .then(data => {\n        console.log(\"Scan Stopped\");\n      })\n      .catch(err => { console.log(\"Error stopping scan\") });\n  }\n\n  // shell for now\n  connect(device) {\n    this.ble.connect(device.id)\n      .subscribe(res => {\n        console.log(\"Success:\" + JSON.stringify(res))\n      },\n      err => {\n        console.log(\"Error:\" + JSON.stringify(err))\n      })\n\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad BlePage');\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/ble/ble.ts","import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app.module';\n\nplatformBrowserDynamic().bootstrapModule(AppModule);\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/main.ts","import { BrowserModule } from '@angular/platform-browser';\nimport { ErrorHandler, NgModule } from '@angular/core';\nimport { IonicApp, IonicErrorHandler, IonicModule } from 'ionic-angular';\nimport { SplashScreen } from '@ionic-native/splash-screen';\nimport { StatusBar } from '@ionic-native/status-bar';\n\nimport { MyApp } from './app.component';\nimport { HomePage } from '../pages/home/home';\nimport {AlertModalPage} from '../pages/alert-modal/alert-modal';\nimport { ViewTripsPage } from '../pages/view-trips/view-trips';\n\nimport { DeviceMotion } from '@ionic-native/device-motion';\nimport { Gyroscope } from '@ionic-native/gyroscope';\nimport { SocialSharing } from '@ionic-native/social-sharing';\nimport { Insomnia } from '@ionic-native/insomnia';\nimport { Geolocation } from '@ionic-native/geolocation';\nimport { AndroidPermissions } from '@ionic-native/android-permissions';\nimport { CommonUtilsProvider } from '../providers/common-utils/common-utils';\nimport { File } from '@ionic-native/file';\nimport { AngularFireModule } from 'angularfire2';\nimport {AngularFireDatabaseModule} from 'angularfire2/database';\nimport { AngularFireAuthModule } from 'angularfire2/auth';\n\nimport { ProgressBarComponent } from '../components/progress-bar/progress-bar';\nimport { IonicStorageModule } from '@ionic/storage';\nimport { InAppBrowser } from '@ionic-native/in-app-browser';\nimport { AppVersion } from '@ionic-native/app-version';\nimport { HttpModule } from '@angular/http';\nimport { BLE } from '@ionic-native/ble';\nimport {BlePage} from \"../pages/ble/ble\";\nimport { SpeechRecognition } from '@ionic-native/speech-recognition';\nimport { DatabaseProvider } from '../providers/database/database';\nimport { ReversePipe } from '../pipes/reverse/reverse';\nimport { SensorsProvider } from '../providers/sensors/sensors';\n\n\n\n// Initialize Firebase\n  export const firebaseConfig = {\n   apiKey: \"AIzaSyCldDUKjFcG0YTS6Oj1n2kn0oT9cFQN878\",\n    authDomain: \"tripdata-3eb84.firebaseapp.com\",\n    databaseURL: \"https://tripdata-3eb84.firebaseio.com\",\n    projectId: \"tripdata-3eb84\",\n    storageBucket: \"tripdata-3eb84.appspot.com\",\n    messagingSenderId: \"329888799939\"\n  };\n\n\n@NgModule({\n  declarations: [\n    MyApp,\n    HomePage,\n    ViewTripsPage,\n    AlertModalPage,\n    ProgressBarComponent,\n    BlePage,\n    ReversePipe\n  ],\n  imports: [\n    AngularFireModule.initializeApp(firebaseConfig),\n    AngularFireDatabaseModule,\n    AngularFireAuthModule,\n    BrowserModule,\n    IonicModule.forRoot(MyApp),\n    HttpModule,\n    IonicStorageModule.forRoot({name:'__tripDB', driverOrder:['sqlite','websql','indexeddb']})\n  ],\n  bootstrap: [IonicApp],\n  entryComponents: [\n    MyApp,\n    HomePage,\n    ViewTripsPage,\n    AlertModalPage,\n    BlePage\n  ],\n  providers: [\n    Geolocation,\n    StatusBar,\n    SplashScreen,\n    DeviceMotion,\n    Gyroscope,\n    SocialSharing,\n    Insomnia,\n    AndroidPermissions,\n    CommonUtilsProvider,\n    File,\n    InAppBrowser,\n    AppVersion,\n    BLE,\n    SpeechRecognition,\n    {provide: ErrorHandler, useClass: IonicErrorHandler},\n    DatabaseProvider,\n    SensorsProvider\n  ]\n})\nexport class AppModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.module.ts","import { Component } from '@angular/core';\nimport { Platform } from 'ionic-angular';\nimport { StatusBar } from '@ionic-native/status-bar';\nimport { SplashScreen } from '@ionic-native/splash-screen';\n\n\nimport { HomePage } from '../pages/home/home';\n@Component({\n  templateUrl: 'app.html'\n})\nexport class MyApp {\n  rootPage:any = HomePage;\n\n  constructor(platform: Platform, statusBar: StatusBar, splashScreen: SplashScreen) {\n    platform.ready().then(() => {\n      // Okay, so the platform is ready and our plugins are available.\n      // Here you can do any higher level native things you might need.\n      statusBar.styleDefault();\n      setTimeout(()=> {splashScreen.hide();},100);\n    });\n  }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.component.ts","var map = {\n\t\"./af\": 257,\n\t\"./af.js\": 257,\n\t\"./ar\": 258,\n\t\"./ar-dz\": 259,\n\t\"./ar-dz.js\": 259,\n\t\"./ar-kw\": 260,\n\t\"./ar-kw.js\": 260,\n\t\"./ar-ly\": 261,\n\t\"./ar-ly.js\": 261,\n\t\"./ar-ma\": 262,\n\t\"./ar-ma.js\": 262,\n\t\"./ar-sa\": 263,\n\t\"./ar-sa.js\": 263,\n\t\"./ar-tn\": 264,\n\t\"./ar-tn.js\": 264,\n\t\"./ar.js\": 258,\n\t\"./az\": 265,\n\t\"./az.js\": 265,\n\t\"./be\": 266,\n\t\"./be.js\": 266,\n\t\"./bg\": 267,\n\t\"./bg.js\": 267,\n\t\"./bn\": 268,\n\t\"./bn.js\": 268,\n\t\"./bo\": 269,\n\t\"./bo.js\": 269,\n\t\"./br\": 270,\n\t\"./br.js\": 270,\n\t\"./bs\": 271,\n\t\"./bs.js\": 271,\n\t\"./ca\": 272,\n\t\"./ca.js\": 272,\n\t\"./cs\": 273,\n\t\"./cs.js\": 273,\n\t\"./cv\": 274,\n\t\"./cv.js\": 274,\n\t\"./cy\": 275,\n\t\"./cy.js\": 275,\n\t\"./da\": 276,\n\t\"./da.js\": 276,\n\t\"./de\": 277,\n\t\"./de-at\": 278,\n\t\"./de-at.js\": 278,\n\t\"./de-ch\": 279,\n\t\"./de-ch.js\": 279,\n\t\"./de.js\": 277,\n\t\"./dv\": 280,\n\t\"./dv.js\": 280,\n\t\"./el\": 281,\n\t\"./el.js\": 281,\n\t\"./en-au\": 282,\n\t\"./en-au.js\": 282,\n\t\"./en-ca\": 283,\n\t\"./en-ca.js\": 283,\n\t\"./en-gb\": 284,\n\t\"./en-gb.js\": 284,\n\t\"./en-ie\": 285,\n\t\"./en-ie.js\": 285,\n\t\"./en-nz\": 286,\n\t\"./en-nz.js\": 286,\n\t\"./eo\": 287,\n\t\"./eo.js\": 287,\n\t\"./es\": 288,\n\t\"./es-do\": 289,\n\t\"./es-do.js\": 289,\n\t\"./es.js\": 288,\n\t\"./et\": 290,\n\t\"./et.js\": 290,\n\t\"./eu\": 291,\n\t\"./eu.js\": 291,\n\t\"./fa\": 292,\n\t\"./fa.js\": 292,\n\t\"./fi\": 293,\n\t\"./fi.js\": 293,\n\t\"./fo\": 294,\n\t\"./fo.js\": 294,\n\t\"./fr\": 295,\n\t\"./fr-ca\": 296,\n\t\"./fr-ca.js\": 296,\n\t\"./fr-ch\": 297,\n\t\"./fr-ch.js\": 297,\n\t\"./fr.js\": 295,\n\t\"./fy\": 298,\n\t\"./fy.js\": 298,\n\t\"./gd\": 299,\n\t\"./gd.js\": 299,\n\t\"./gl\": 300,\n\t\"./gl.js\": 300,\n\t\"./gom-latn\": 301,\n\t\"./gom-latn.js\": 301,\n\t\"./he\": 302,\n\t\"./he.js\": 302,\n\t\"./hi\": 303,\n\t\"./hi.js\": 303,\n\t\"./hr\": 304,\n\t\"./hr.js\": 304,\n\t\"./hu\": 305,\n\t\"./hu.js\": 305,\n\t\"./hy-am\": 306,\n\t\"./hy-am.js\": 306,\n\t\"./id\": 307,\n\t\"./id.js\": 307,\n\t\"./is\": 308,\n\t\"./is.js\": 308,\n\t\"./it\": 309,\n\t\"./it.js\": 309,\n\t\"./ja\": 310,\n\t\"./ja.js\": 310,\n\t\"./jv\": 311,\n\t\"./jv.js\": 311,\n\t\"./ka\": 312,\n\t\"./ka.js\": 312,\n\t\"./kk\": 313,\n\t\"./kk.js\": 313,\n\t\"./km\": 314,\n\t\"./km.js\": 314,\n\t\"./kn\": 315,\n\t\"./kn.js\": 315,\n\t\"./ko\": 316,\n\t\"./ko.js\": 316,\n\t\"./ky\": 317,\n\t\"./ky.js\": 317,\n\t\"./lb\": 318,\n\t\"./lb.js\": 318,\n\t\"./lo\": 319,\n\t\"./lo.js\": 319,\n\t\"./lt\": 320,\n\t\"./lt.js\": 320,\n\t\"./lv\": 321,\n\t\"./lv.js\": 321,\n\t\"./me\": 322,\n\t\"./me.js\": 322,\n\t\"./mi\": 323,\n\t\"./mi.js\": 323,\n\t\"./mk\": 324,\n\t\"./mk.js\": 324,\n\t\"./ml\": 325,\n\t\"./ml.js\": 325,\n\t\"./mr\": 326,\n\t\"./mr.js\": 326,\n\t\"./ms\": 327,\n\t\"./ms-my\": 328,\n\t\"./ms-my.js\": 328,\n\t\"./ms.js\": 327,\n\t\"./my\": 329,\n\t\"./my.js\": 329,\n\t\"./nb\": 330,\n\t\"./nb.js\": 330,\n\t\"./ne\": 331,\n\t\"./ne.js\": 331,\n\t\"./nl\": 332,\n\t\"./nl-be\": 333,\n\t\"./nl-be.js\": 333,\n\t\"./nl.js\": 332,\n\t\"./nn\": 334,\n\t\"./nn.js\": 334,\n\t\"./pa-in\": 335,\n\t\"./pa-in.js\": 335,\n\t\"./pl\": 336,\n\t\"./pl.js\": 336,\n\t\"./pt\": 337,\n\t\"./pt-br\": 338,\n\t\"./pt-br.js\": 338,\n\t\"./pt.js\": 337,\n\t\"./ro\": 339,\n\t\"./ro.js\": 339,\n\t\"./ru\": 340,\n\t\"./ru.js\": 340,\n\t\"./sd\": 341,\n\t\"./sd.js\": 341,\n\t\"./se\": 342,\n\t\"./se.js\": 342,\n\t\"./si\": 343,\n\t\"./si.js\": 343,\n\t\"./sk\": 344,\n\t\"./sk.js\": 344,\n\t\"./sl\": 345,\n\t\"./sl.js\": 345,\n\t\"./sq\": 346,\n\t\"./sq.js\": 346,\n\t\"./sr\": 347,\n\t\"./sr-cyrl\": 348,\n\t\"./sr-cyrl.js\": 348,\n\t\"./sr.js\": 347,\n\t\"./ss\": 349,\n\t\"./ss.js\": 349,\n\t\"./sv\": 350,\n\t\"./sv.js\": 350,\n\t\"./sw\": 351,\n\t\"./sw.js\": 351,\n\t\"./ta\": 352,\n\t\"./ta.js\": 352,\n\t\"./te\": 353,\n\t\"./te.js\": 353,\n\t\"./tet\": 354,\n\t\"./tet.js\": 354,\n\t\"./th\": 355,\n\t\"./th.js\": 355,\n\t\"./tl-ph\": 356,\n\t\"./tl-ph.js\": 356,\n\t\"./tlh\": 357,\n\t\"./tlh.js\": 357,\n\t\"./tr\": 358,\n\t\"./tr.js\": 358,\n\t\"./tzl\": 359,\n\t\"./tzl.js\": 359,\n\t\"./tzm\": 360,\n\t\"./tzm-latn\": 361,\n\t\"./tzm-latn.js\": 361,\n\t\"./tzm.js\": 360,\n\t\"./uk\": 362,\n\t\"./uk.js\": 362,\n\t\"./ur\": 363,\n\t\"./ur.js\": 363,\n\t\"./uz\": 364,\n\t\"./uz-latn\": 365,\n\t\"./uz-latn.js\": 365,\n\t\"./uz.js\": 364,\n\t\"./vi\": 366,\n\t\"./vi.js\": 366,\n\t\"./x-pseudo\": 367,\n\t\"./x-pseudo.js\": 367,\n\t\"./yo\": 368,\n\t\"./yo.js\": 368,\n\t\"./zh-cn\": 369,\n\t\"./zh-cn.js\": 369,\n\t\"./zh-hk\": 370,\n\t\"./zh-hk.js\": 370,\n\t\"./zh-tw\": 371,\n\t\"./zh-tw.js\": 371\n};\nfunction webpackContext(req) {\n\treturn __webpack_require__(webpackContextResolve(req));\n};\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) // check for number or string\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\treturn id;\n};\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 509;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/moment/locale ^\\.\\/.*$\n// module id = 509\n// module chunks = 0","import { Injectable } from '@angular/core';\nimport { ToastController, LoadingController, AlertController } from 'ionic-angular';\nimport { Observable } from 'rxjs/Rx';\nimport * as moment from 'moment';\n\n\nimport { AppVersion } from '@ionic-native/app-version';\nimport { Platform } from 'ionic-angular';\nimport { Http } from '@angular/http';\nimport 'rxjs/add/operator/map';\n\n\nconst versionUrl:string = \"https://api.github.com/repos/hsccorp/sensorcollect/releases/latest\";\n\n// TBD: firebase stuff is here too - need to move it out to its own service\n\n@Injectable()\nexport class CommonUtilsProvider {\n\n  loader: any;\n  timer: any;\n  version: string = \"undefined\";\n\n  constructor(public toastCtrl: ToastController, public loadingCtrl: LoadingController, public alert: AlertController, public appVersion: AppVersion, public plt: Platform, public http: Http) {\n\n    plt.ready().then(() => {\n      this.appVersion.getVersionNumber()\n        .then(ver => { this.version = ver; console.log(\"version=\" + ver) });\n\n    })\n  }\n\n  getRemoteVersion(): Promise<any> {\n    let url = versionUrl;\n    return new Promise((resolve, reject) => {\n      this.http.get(url).map(res => res.json()).subscribe(data => {\n        let ver = data.tag_name;\n        ver = ver.replace (\"v\",\"\");\n        console.log(\"Latest app version:\" + JSON.stringify(ver));\n        resolve(ver);\n      },\n        err => { console.log(\"Latest App version error:\" + JSON.stringify(err)); reject(err); }\n\n      );\n    });\n  }\n\n  // returns app version\n  getVersion(): string {\n    return this.version;\n  }\n  // pass -1 to dur for infinite\n  presentLoader(text, dur = 6000, remove = true) {\n\n    if (this.loader && remove) { this.loader.dismiss(); }\n    this.loader = this.loadingCtrl.create({\n      content: text,\n      duration: dur\n    });\n    this.loader.present();\n  }\n\n  removeLoader() {\n    if (this.loader) { this.loader.dismiss(); }\n  }\n\n  // wrapper to present a toast with different colors\n  // error = red\n  // any other val = green\n  presentToast(text, type?, dur?) {\n\n    var cssClass = 'successToast';\n    if (type == 'error') cssClass = 'errorToast';\n\n    let toast = this.toastCtrl.create({\n      message: text,\n      duration: dur || 1800,\n      position: 'top',\n      cssClass: cssClass\n    });\n    toast.present();\n  }\n\n\n  //credit: https://gist.github.com/alexey-bass/1115557\n  versionCompare(left, right) {\n    if (typeof left + typeof right != 'stringstring')\n      return false;\n\n    var a = left.split('.');\n    var b = right.split('.');\n    var i = 0;\n    var len = Math.max(a.length, b.length);\n\n    for (; i < len; i++) {\n      if ((a[i] && !b[i] && parseInt(a[i]) > 0) || (parseInt(a[i]) > parseInt(b[i]))) {\n        return 1;\n      }\n      else if ((b[i] && !a[i] && parseInt(b[i]) > 0) || (parseInt(a[i]) < parseInt(b[i]))) {\n        return -1;\n      }\n    }\n\n    return 0;\n  }\n\n\n\n  // start a trip timer\n  startTimer(timer) {\n    this.timer = Observable.interval(1000)\n      .subscribe(x => { timer.time = \"(\" + moment.utc(x * 1000).format(\"HH:mm:ss\") + \")\"; });\n  }\n\n\n// checks if obj is present in array a\n  contains(a, obj) {\n    for (var i = 0; i < a.length; i++) {\n      if (a[i].id == obj.id) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  // stop trip timer\n  stopTimer(timer) {\n    this.timer.unsubscribe();\n    timer.time = \"\";\n  }\n\n\n\n\n\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/providers/common-utils/common-utils.ts","//https://www.joshmorony.com/build-a-simple-progress-bar-component-in-ionic-2/\n\nimport { Component, Input } from '@angular/core';\n \n@Component({\n  selector: 'progress-bar',\n  templateUrl: 'progress-bar.html'\n})\nexport class ProgressBarComponent {\n \n  @Input('progress') progress;\n \n  constructor() {\n \n  }\n \n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/progress-bar/progress-bar.ts","import { Pipe, PipeTransform } from '@angular/core';\n\n/**\n * Generated class for the ReversePipe pipe.\n *\n * See https://angular.io/docs/ts/latest/guide/pipes.html for more info on\n * Angular Pipes.\n */\n@Pipe({\n  name: 'reverse',\n})\nexport class ReversePipe implements PipeTransform {\n \n  transform(value) {\n    if (!value) return;\n    return value.reverse();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pipes/reverse/reverse.ts"],"sourceRoot":""}